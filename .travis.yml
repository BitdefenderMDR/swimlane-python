sudo: false
language: python
python:
- '2.7'
- '3.4'
- '3.5'
- '3.6'
install:
- pip install -U -r requirements.txt
- pip install -U -r test-requirements.txt
- pip install codacy-coverage
script: py.test -v --cov=swimlane --cov-report=xml
after_script: python-codacy-coverage -r coverage.xml
before_deploy: python offline_installer/build_installer.py
deploy:
- provider: releases
  api_key:
    secure: cJWvvnIxF67OgjUfpahgLbsQC/XEjgwkX1Ohb32FY9rhKEJcqjU46+31N9vGKkPMFi42K0/lrfuM6w9oCiM4IyOM3y8AGro5XoMwyIMBvglyS0HHPF5gVNu+WLj4M2Zx47MechgHcAxqw8NMYMqxIIx5vBzHabWnMt2Z16Q9r4olcwBxzLqJHowchACU9XIY9EH+i3OonDRdyUScAQq1aw4BJfkdZKy3KUl3H2/yyRlJmhLHJ6/XaypWrdPCprs65Rtfw20M7bDa2+EJLq3GkzBYflWvW2qYYcJoZZUD3YnqApEgxkPtaYF+Wt6sjENiqHEyrOxA0OVapbLskm8aN66lFRr/n/7WeJaPPaN39Qs2ToVBH5AYLiq2id+/9sq0tM35XolM7bFrIB8tad2u/0+uWnt7E+g/26b0KFLRX0ReZGBL+zHYTM2AGlkpUZpKlaGlUd7HNbdTUjBnQYMeGA/O/QJ0ExPRjRjdDw/VZrW6zk83ynqAg5qmpNV/tG/oTj4h/e7yfMvJpDuFZ8DkVs9RRdnY462AOToby6oooM+b012fY9UykMgfcEXeq4YNiUnvdsmNXFGyv0s+/VvIZdcl6QGNV8dy//qLUdhQ3s59AI4Q4YxH318pkoQDEl7kxbSvcf5dkE7W29/6SUulPc4+2hK5cmQcddPASsHmrNY=
  file_glob: true
  file: dist/*offline-installer*
  skip_cleanup: true
  on:
    tags: true
    repo: swimlane/swimlane-python
- provider: pypi
  user: swimlane
  distributions: sdist bdist_wheel
  password:
    secure: KHYfYqDErF80PGvKqxSBu1gOJWvhGiMEFLEfpc2ajhCHlj+C+IQTmb/WiRTI7MukmzwQ7OWaPcMyC6L75br2PrgC8Er0PqL3+ROFJDV42Xh9fQ3+Z0F84tyoTGxo0IVZLE/oL4a4kzeopgpZq8w6ZxdlMLZZi6cP7MO1vZv36afKfHXXa5MgS7iYRP9M0AV8U9t/mM0Pbto89/id25Ps02HrtKAX8L7XNwfNX6nZVgh6d0ZXmkAYko8dOnDJF9a/Gh94ypTFgk8HIJ3+rziZImnqMarHbsW0kSUfSEf3WMX+8q3zynIXIkexZLNFmEGJJcGvIK4/FP1wmjhbLDvz8I0JUItsm6lMaJYKrl/1SsKfW5My5fYxSrE/g/ys+tHao16JeCCtaCbe/Ytnuy0hYgXM/wLw8v9AHXG1yOIjR8fBGo4ya0+7WAXCwWnetXln2dF01Azg+M9ak81nb7zQCl6UaODZO73CjPH14HBm7pCuaKf0ocfql7huoIEBKrNJPhzq8nY09gvvUsAn07Eahah5FrXfq27iCK4rRGBceEyHnl2flKw1Z8aeXJQrlehUV8LwfmHDAOQbSVyXtFRC21zS7vUyC0xB9qurSug0Orde6IedXNqPjS8hbRINjVAbN48O4JMuNdQv5RzNCRQE7yakJt+zvFbU1Y0LR8sD2X0=
  on:
    tags: true
    repo: swimlane/swimlane-python
